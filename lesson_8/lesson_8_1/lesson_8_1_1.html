<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>javascript中实现 发布-订阅模式</title>
</head>
<body>
    <button id="click">ok</button>
    <script type="text/javascript">
        /*
            javascript实现 发布-订阅模式
            布布-订阅模式又叫观察者模式。它定义对象间的一种一多的这依赖关系。当一个对象的状态发生改变时，所有依赖于它的对象都将
            得到通知，在javasctript开发中，一般用事件模型来替代传统的发布-订阅模式

            发布-订阅模式的作用：
                假如有一个这样的需求，小明去看房子，但是售楼小姐告诉他，房子已经卖完了。按如果没有发布-订阅的模式的情况下，小明
                每天都会去问一次有没有房子。
                如果有了订阅模式的情况下：小明留下一个联系方式，当有房子的时候售楼小姐会打电话话一个个通知要看房子的人
                1、购房者不用再天天给售楼处打电话咨询开售时间，在合适的时间点，售楼处作为发布才会通知这些消息订阅者。
                2、购房者和售楼处之间不存在耦合，当有新的购房者出现时，他只需要把手机号码留在售楼处，售楼处不关心购房者的任何情况，不管购房者是男女还是什么
                    而售楼处的任何变动也不会影响到购房者，比如售楼MM换了，售楼处从一楼搬到N楼，这些改变都和购房者无关。只要售楼处记得短信发送这件事

                说明一点：发布-订阅模式可以广泛用在异步编程中，这是一种替代传递架设函数的方案，比如可以订阅ajax请求error,succ等事件。
                         或者如果想在动画的每一帧完成之后做一个相应的事情，那可以订阅一个事件，然后在动画的每一帧完成之后发布这个事件，
                         在异步编程中使用发布-订阅模式，就无需过多关注对象在异步运行期间的内部状态，而只需要订阅感兴趣的事件发生点。
                说明二点：发布-订阅模式可以取代对象之间的硬编码的通知机制，一个对象不用再显式地调用另一个对象的某个接口，发布-订阅模式让两个对象
                         耦合地联系在一起，虽然不太清楚彼此的细节，但是这不影响它们之间相互通信。当有新的订阅者出现时，发布者的代码不需要任何修改，
                         同样发布者需要改变时，也不会影响之前的订阅者，只需要之前约定的事件名没有变化，就可以自由地改变它们。

                DOM事件：
                    DOM的绑定事件函数，就是使用发布-订阅模式来实现的。
        */
        var btn = document.getElementById('click');
        btn.addEventListener('click',function(){  //订阅
            console.log('aaa');
        },false)
        btn.click(); //触 发
    </script>
</body>
</html>
